version: '3.8'

services:
  magic-eraser-pro:
    build: .
    container_name: magic-eraser-pro
    restart: unless-stopped
    ports:
      - "3099:3099"
    environment:
      - NODE_ENV=production
    volumes:
      # 可选：将服务端产生的临时处理目录映射到宿主机，便于排查与持久化
      - ./temp-uploads:/app/temp-uploads
      - ./temp-outputs:/app/temp-outputs
    # 如果宿主机平台支持 Nvidia 显卡硬件解码/编码透传，可去掉下面 deploy 配置的注释
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
